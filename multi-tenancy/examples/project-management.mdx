---
title: Project Management Example
description: Building a complete project management system
icon: 'folder'
---

## Overview

Build a project management system where teams can manage projects and tasks.

## Models

### Project Model

```php
<?php

namespace App\Models;

use Filament\Facades\Filament;
use Illuminate\Database\Eloquent\Builder;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\HasMany;

class Project extends Model
{
    protected $fillable = ['team_id', 'name', 'description', 'status', 'due_date', 'budget'];
    protected $casts = ['due_date' => 'date', 'budget' => 'decimal:2'];

    protected static function booted(): void
    {
        static::addGlobalScope('team', function (Builder $builder) {
            if (Filament::getTenant()) {
                $builder->where('team_id', Filament::getTenant()->id);
            }
        });

        static::creating(function (Project $project) {
            if (!$project->team_id && Filament::getTenant()) {
                $project->team_id = Filament::getTenant()->id;
            }
        });
    }

    public function team()
    {
        return $this->belongsTo(Team::class);
    }

    public function tasks(): HasMany
    {
        return $this->hasMany(Task::class);
    }

    public function completedTasks(): HasMany
    {
        return $this->tasks()->where('completed', true);
    }

    public function getCompletionPercentageAttribute(): int
    {
        if ($this->tasks()->count() === 0) return 0;
        return (int) ($this->completedTasks()->count() / $this->tasks()->count() * 100);
    }
}
```

### Task Model

```php
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Builder;
use Illuminate\Database\Eloquent\Model;

class Task extends Model
{
    protected $fillable = ['project_id', 'assigned_to', 'title', 'description', 'priority', 'completed', 'due_date'];
    protected $casts = ['completed' => 'boolean', 'due_date' => 'datetime'];

    protected static function booted(): void
    {
        static::addGlobalScope('team', function (Builder $builder) {
            if (Filament::getTenant()) {
                $builder->whereHas('project', fn ($query) => $query->where('team_id', Filament::getTenant()->id));
            }
        });
    }

    public function project()
    {
        return $this->belongsTo(Project::class);
    }

    public function assignedTo()
    {
        return $this->belongsTo(User::class, 'assigned_to');
    }
}
```

## Migration

```php
Schema::create('projects', function (Blueprint $table) {
    $table->id();
    $table->foreignId('team_id')->constrained()->cascadeOnDelete();
    $table->string('name');
    $table->text('description')->nullable();
    $table->enum('status', ['planning', 'in_progress', 'completed'])->default('planning');
    $table->date('due_date')->nullable();
    $table->decimal('budget', 10, 2)->nullable();
    $table->timestamps();

    $table->index(['team_id', 'status']);
});

Schema::create('tasks', function (Blueprint $table) {
    $table->id();
    $table->foreignId('project_id')->constrained()->cascadeOnDelete();
    $table->foreignId('assigned_to')->nullable()->constrained('users');
    $table->string('title');
    $table->text('description')->nullable();
    $table->enum('priority', ['low', 'medium', 'high'])->default('medium');
    $table->boolean('completed')->default(false);
    $table->timestamp('due_date')->nullable();
    $table->timestamps();

    $table->index('project_id');
});
```

## Dashboard Widget

```php
<?php

namespace App\Filament\App\Widgets;

use App\Models\Project;
use App\Models\Task;
use Filament\Widgets\StatsOverviewWidget as BaseWidget;
use Filament\Widgets\StatsOverviewWidget\Stat;

class ProjectOverview extends BaseWidget
{
    protected function getStats(): array
    {
        $totalProjects = Project::count();
        $activeProjects = Project::where('status', 'in_progress')->count();
        $completedTasks = Task::where('completed', true)->count();
        $totalTasks = Task::count();

        return [
            Stat::make('Total Projects', $totalProjects)
                ->description("{$activeProjects} active")
                ->color('primary'),

            Stat::make('Task Completion', $completedTasks . '/' . $totalTasks)
                ->description($totalTasks > 0 ? round(($completedTasks / $totalTasks) * 100) . '% complete' : 'No tasks')
                ->color('success'),
        ];
    }
}
```

See the complete implementation in [Tenant-Scoped Resources](/multi-tenancy/resources/creating-resources).
